<%- include('../partials/header') %>

<div class="container mt-4" style="max-width: 500px;">
  <h2 class="mb-4">Checkout</h2>

  <!-- âœ… Server-side error message -->
  <% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } %>

  <form id="checkoutForm" action="/orders/checkout" method="POST" novalidate>

    <!-- Full Name -->
    <div class="mb-3">
      <label for="name">Full Name</label>
      <input
        type="text"
        id="name"
        name="name"
        class="form-control"
        required
        placeholder="Your full name"
        value="<%= formData?.name || user?.name || '' %>"
      >
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        class="form-control"
        required
        placeholder="you@example.com"
        pattern="^[^@\s]+@[^@\s]+\.[^@\s]+$"
        title="Please enter a valid email address"
        value="<%= formData?.email || user?.email || '' %>"
      >
    </div>

    <!-- Phone -->
    <div class="mb-3">
      <label for="phone">Phone</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        class="form-control"
        required
        pattern="[0-9]{10}"
        title="Enter a valid 10-digit phone number"
        placeholder="e.g. 9876543210"
        value="<%= formData?.phone || '' %>"
      >
    </div>

    <!-- Address -->
    <div class="mb-3">
      <label for="address">Address</label>
      <textarea
        id="address"
        name="address"
        class="form-control"
        required
        rows="3"
        placeholder="Enter your delivery address"
      ><%= formData?.address || user?.address || '' %></textarea>
    </div>

    <button type="submit" class="btn btn-primary w-100">Continue to Payment</button>
  </form>
</div>

<script src="/js/validation.js"></script>
<%- include('../partials/footer') %>
